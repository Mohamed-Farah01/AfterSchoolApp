(function(){"use strict";var e={9687:function(e,t,o){var r=o(3751),s=o(641),n=o(33);const a=e=>((0,s.Qi)("data-v-220e4208"),e=e(),(0,s.jt)(),e),l={id:"app"},c=a((()=>(0,s.Lk)("h1",null,"Ubex AfterSchool Activities",-1)));function i(e,t,o,r,a,i){const u=(0,s.g2)("LessonComponent"),d=(0,s.g2)("CheckoutForm");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("header",null,[c,(0,s.Lk)("button",{class:"lessons",onClick:t[0]||(t[0]=e=>a.showCheckout=!a.showCheckout)},(0,n.v_)(a.showCheckout?"Back to Lessons":"View Cart")+" ("+(0,n.v_)(a.cart.length)+") ",1)]),a.showCheckout?((0,s.uX)(),(0,s.Wv)(d,{key:1,cart:a.cart,onRemoveFromCart:i.removeFromCart,onSubmitOrder:i.submitOrder},null,8,["cart","onRemoveFromCart","onSubmitOrder"])):((0,s.uX)(),(0,s.Wv)(u,{key:0,canAddToCart:i.canAddToCart,cartCount:i.cartCount,onAddToCart:i.addToCart},null,8,["canAddToCart","cartCount","onAddToCart"]))])}o(4114);const u=e=>((0,s.Qi)("data-v-74cb5f58"),e=e(),(0,s.jt)(),e),d={class:"container my-5"},h={class:"d-flex align-items-end gap-3 flex-wrap mb-4"},p=u((()=>(0,s.Lk)("label",{for:"search",class:"form-label"},"Search",-1))),m=u((()=>(0,s.Lk)("label",{for:"sortAttribute",class:"form-label"},"Sort By:",-1))),k=u((()=>(0,s.Lk)("option",{value:"subject"},"Subject",-1))),v=u((()=>(0,s.Lk)("option",{value:"location"},"Location",-1))),L=u((()=>(0,s.Lk)("option",{value:"price"},"Price",-1))),b=u((()=>(0,s.Lk)("option",{value:"spaces"},"Spaces",-1))),f=[k,v,L,b],C=u((()=>(0,s.Lk)("label",{for:"sortOrder",class:"form-label"},"Sort Order:",-1))),y=u((()=>(0,s.Lk)("option",{value:"asc"},"Ascending",-1))),g=u((()=>(0,s.Lk)("option",{value:"desc"},"Descending",-1))),O=[y,g],w={id:"main-wrapper"},_={class:"product-container row row-cols-1 row-cols-md-2 row-cols-lg-3 row-gap-3"},T={class:"product rounded-8 p-4"},A={class:"lesson-details"},F=["onClick","disabled"],S={key:0},j={key:1};function N(e,t,o,a,l,c){return(0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("div",h,[(0,s.Lk)("div",null,[p,(0,s.bo)((0,s.Lk)("input",{id:"search",type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),placeholder:"search for a lesson...",onInput:t[1]||(t[1]=(...e)=>c.searchLessons&&c.searchLessons(...e))},null,544),[[r.Jo,l.searchTerm]])]),(0,s.Lk)("div",null,[m,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.sortAttribute=e),class:"form-select",onChange:t[3]||(t[3]=(...e)=>c.searchLessons&&c.searchLessons(...e))},f,544),[[r.u1,l.sortAttribute]])]),(0,s.Lk)("div",null,[C,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.sortOrder=e),class:"form-select",onChange:t[5]||(t[5]=(...e)=>c.searchLessons&&c.searchLessons(...e))},O,544),[[r.u1,l.sortOrder]])])]),(0,s.Lk)("main",w,[(0,s.Lk)("div",_,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.lessons,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"col",key:t},[(0,s.Lk)("div",T,[(0,s.Lk)("i",{class:(0,n.C4)(e.icon)},null,2),(0,s.Lk)("div",A,[(0,s.Lk)("h2",null,(0,n.v_)(e.subject),1),(0,s.Lk)("p",null,"Location: "+(0,n.v_)(e.location),1),(0,s.Lk)("p",null,"Price: "+(0,n.v_)(e.price),1),(0,s.Lk)("p",null,"Spaces: "+(0,n.v_)(e.spaces),1),(0,s.Lk)("button",{class:"btn btn-lg success-button",onClick:t=>c.addLessonToCart(e),disabled:0===e.availableInventory}," Add to Cart ",8,F),0===e.availableInventory?((0,s.uX)(),(0,s.CE)("span",S,"All out!")):e.availableInventory<5?((0,s.uX)(),(0,s.CE)("span",j,"Only "+(0,n.v_)(e.availableInventory-o.cartCount(e._id))+" left!",1)):(0,s.Q3)("",!0)])])])))),128))])])])}var E={name:"LessonComponent",props:["canAddToCart","cartCount","add-to-cart"],data(){return{lessons:[],searchTerm:"",sortAttribute:"subject",sortOrder:"asc",baseURL:"https://backend-coursework-2.vercel.app/"}},created(){this.fetchLessons()},methods:{async fetchLessons(){try{const e=await fetch(`${this.baseURL}collection/lessons`);this.lessons=await e.json()}catch(e){console.error("Error fetching lessons:",e)}},async searchLessons(){var e={search:this.searchTerm,sort:this.sortAttribute,order:this.sortOrder},t=await fetch(`${this.baseURL}search/collection/lessons/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});this.lessons=await t.json()},addLessonToCart(e){this.$emit("add-to-cart",e)}}},U=o(6262);const X=(0,U.A)(E,[["render",N],["__scopeId","data-v-74cb5f58"]]);var I=X;const P=e=>((0,s.Qi)("data-v-07713428"),e=e(),(0,s.jt)(),e),V={class:"checkout-form"},x={class:"checkout"},R=P((()=>(0,s.Lk)("h2",null,"Checkout",-1))),$=P((()=>(0,s.Lk)("strong",null,"First Name:",-1))),J=P((()=>(0,s.Lk)("strong",null,"Last Name:",-1))),Q=P((()=>(0,s.Lk)("strong",null,"Phone:",-1))),W={key:0,style:{color:"#F7CA00"}},B=P((()=>(0,s.Lk)("h2",null,"Order Information",-1))),K=["disabled"],D={key:1},q={class:"cart"},z=P((()=>(0,s.Lk)("h2",null,"Shopping Cart",-1))),G={class:"cart-list"},H={class:"cart-item"},M={class:"product-details"},Y=P((()=>(0,s.Lk)("strong",null,"Subject:",-1))),Z=P((()=>(0,s.Lk)("strong",null,"Location:",-1))),ee=P((()=>(0,s.Lk)("strong",null,"Price:",-1))),te=P((()=>(0,s.Lk)("strong",null,"Spaces:",-1))),oe=["onClick"];function re(e,t,o,a,l,c){return(0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("div",x,[R,(0,s.Lk)("p",null,[$,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.order.firstName=e)},null,512),[[r.Jo,l.order.firstName,void 0,{trim:!0}]])]),(0,s.Lk)("p",null,[J,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.order.lastName=e)},null,512),[[r.Jo,l.order.lastName,void 0,{trim:!0}]])]),(0,s.Lk)("p",null,[Q,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.order.phone=e),type:"tel"},null,512),[[r.Jo,l.order.phone,void 0,{number:!0}]])]),c.isFormValid?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("p",W,"Please fill in all fields.")),B,(0,s.Lk)("p",null,"First Name: "+(0,n.v_)(l.order.firstName),1),(0,s.Lk)("p",null,"Last Name: "+(0,n.v_)(l.order.lastName),1),(0,s.Lk)("p",null,"Phone Number: "+(0,n.v_)(l.order.phone),1),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>c.submitOrderForm&&c.submitOrderForm(...e)),disabled:!c.isFormValid},"Place Order",8,K),l.orderSubmitted?((0,s.uX)(),(0,s.CE)("p",D,"Order Submitted!")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",q,[z,(0,s.Lk)("ul",G,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.cart,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("div",H,[(0,s.Lk)("i",{class:(0,n.C4)(e.icon)},null,2),(0,s.Lk)("div",M,[(0,s.Lk)("h3",null,(0,n.v_)(e.title),1),(0,s.Lk)("p",null,[Y,(0,s.eW)(" "+(0,n.v_)(e.subject),1)]),(0,s.Lk)("p",null,[Z,(0,s.eW)(" "+(0,n.v_)(e.location),1)]),(0,s.Lk)("p",null,[ee,(0,s.eW)(" "+(0,n.v_)(e.price),1)]),(0,s.Lk)("p",null,[te,(0,s.eW)(" "+(0,n.v_)(e.spaces),1)])]),(0,s.Lk)("button",{onClick:t=>c.removeFromCart(e._id),class:"remove-button"},"Remove",8,oe)])])))),128))])])])}var se={name:"CheckoutForm",props:["cart","submit-order"],data(){return{order:{firstName:"",lastName:"",phone:""},orderSubmitted:!1}},computed:{isFormValid(){return this.order.firstName&&this.order.lastName&&this.order.phone}},methods:{removeFromCart(e){this.$emit("remove-from-cart",e)},submitOrderForm(){this.isFormValid&&this.$emit("submit-order",this.order)}}};const ne=(0,U.A)(se,[["render",re],["__scopeId","data-v-07713428"]]);var ae=ne,le={name:"App",components:{LessonComponent:I,CheckoutForm:ae},data(){return{lessons:[],cart:[],showCheckout:!1,baseURL:"https://backend-coursework-2.vercel.app/"}},methods:{async submitOrder(e){try{this.cart.forEach((e=>{fetch(`${this.baseURL}collection/lessons/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:e.spaces-this.cart.filter((t=>t._id===e._id)).length})})}));const t=await fetch(`${this.baseURL}collection/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,cart:this.cart})});t.ok&&(this.cart.length=0,this.showCheckout=!1,alert("Order Submitted"))}catch(t){console.error("Error submitting order:",t)}},canAddToCart(e){return e.spaces>this.cartCount(e._id)},cartCount(e){return this.cart.filter((t=>t._id===e)).length},addToCart(e){this.canAddToCart(e)&&this.cart.push(e)},removeFromCart(e){const t=this.cart.findIndex((t=>t._id===e));-1!==t&&this.cart.splice(t,1)}}};const ce=(0,U.A)(le,[["render",i],["__scopeId","data-v-220e4208"]]);var ie=ce;(0,r.Ef)(ie).mount("#app")}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,r,s,n){if(!r){var a=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],n=e[u][2];for(var l=!0,c=0;c<r.length;c++)(!1&n||a>=n)&&Object.keys(o.O).every((function(e){return o.O[e](r[c])}))?r.splice(c--,1):(l=!1,n<a&&(a=n));if(l){e.splice(u--,1);var i=s();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,s,n]}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,n,a=r[0],l=r[1],c=r[2],i=0;if(a.some((function(t){return 0!==e[t]}))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(c)var u=c(o)}for(t&&t(r);i<a.length;i++)n=a[i],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(u)},r=self["webpackChunkpetstore"]=self["webpackChunkpetstore"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(9687)}));r=o.O(r)})();
//# sourceMappingURL=app.58f0e6d5.js.map